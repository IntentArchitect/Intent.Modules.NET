@using MudBlazor.ExampleApp.Client.Common.Validation
@using MudBlazor.ExampleApp.Client.HttpClients.Contracts.Services.Customers
@inject IValidatorProvider ValidatorProvider

<MudDialog>
    <DialogContent>
        @if (Model is not null) 
        {
            <MudForm @ref="@_form"
                     Model="Model"
                     Validation="@(ValidatorProvider.GetValidationFunc<CustomerDto>())">
                <MudGrid>
                    <MudItem xs="12"
                             md="6">
                        <MudTextField @bind-Value="Model.Name"
                                      Label="Name"
                                      For="@(() => Model.Name)" />
                    </MudItem>
                    <MudItem xs="12"
                             md="6">
                        <MudTextField @bind-Value="Model.AccountNo"
                                      Label="Account No"
                                      For="@(() => Model.AccountNo)" />
                    </MudItem>
                    <MudItem xs="12">
                        <MudTextField @bind-Value="Model.AddressLine1"
                                      Label="Address Line1"
                                      For="@(() => Model.AddressLine1)" />
                    </MudItem>
                    <MudItem xs="12">
                        <MudTextField @bind-Value="Model.AddressLine2"
                                      Label="Address Line2"
                                      For="@(() => Model.AddressLine2)" />
                    </MudItem>
                    <MudItem xs="12"
                             md="6"
                             lg="8">
                        <MudTextField @bind-Value="Model.AddressCity"
                                      Label="City"
                                      For="@(() => Model.AddressCity)" />
                    </MudItem>
                    <MudItem xs="12"
                             md="6">
                        <MudTextField @bind-Value="Model.AddressCountry"
                                      Label="Country"
                                      For="@(() => Model.AddressCountry)" />
                    </MudItem>
                    <MudItem xs="12"
                             md="6">
                        <MudTextField @bind-Value="Model.AddressPostal"
                                      Label="Postal Code"
                                      For="@(() => Model.AddressPostal)" />
                    </MudItem>
                </MudGrid>
            </MudForm>
        }
    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.Save"
                   Class="my-2 mr-2"
                   Color="Color.Primary"
                   OnClick="() => OnSaveClicked()"
                   Disabled="@_onSaveClickedProcessing">
            @if (_onSaveClickedProcessing) 
            {
                <MudProgressCircular Class="ms-n1"
                                     Size="Size.Small"
                                     Indeterminate="true" />
            }
            <MudText>Save</MudText>
        </MudButton>
        <MudButton Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.Cancel"
                   Class="my-2 mr-2"
                   Color="Color.Default"
                   OnClick="() => OnCancelClicked()">
            <MudText>Cancel</MudText>
        </MudButton>
    </DialogActions>
</MudDialog>
