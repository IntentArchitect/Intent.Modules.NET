<?xml version="1.0" encoding="utf-8"?>
<stereotypeDefinition id="4c7ff86d-641f-431b-a20f-94b3ccbef265" version="3.1.0">
  <comment>Marks that the table should be included in diff-based audit tracking.</comment>
  <name>Diff Audit</name>
  <targetMode>of-type</targetMode>
  <targetTypes>
    <type id="04e12b51-ed12-42a3-9667-a6aa81bb6d10">Class</type>
  </targetTypes>
  <targetReferenceTypes />
  <applyMode>manually</applyMode>
  <icon type="UrlImagePath" source="data:image/png;base64,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" />
  <displayIcon>false</displayIcon>
  <displayIconFunction>return true;</displayIconFunction>
  <displayFunction />
  <displayAsAnnotation>false</displayAsAnnotation>
  <displayAsText>true</displayAsText>
  <autoAdd>false</autoAdd>
  <allowMultipleApplies>false</allowMultipleApplies>
  <parentFolderId>606f1c2a-22a2-4dc2-a64d-694047786905</parentFolderId>
  <order>0</order>
  <packageId>e4873852-59e4-4522-84c9-c5980e197fcc</packageId>
  <packageName>Intent.EntityFrameworkCore.DiffAudit</packageName>
  <onAppliedScript>/// &amp;lt;reference path="../../../../typings/elementmacro.context.api.d.ts" /&amp;gt;
/**
 * Used by Intent.Modules.NET\Modules\Intent.Modules.EntityFramework.DiffAudit
 *
 * Source code here:
 * https://github.com/IntentArchitect/Intent.Modules.NET/blob/master/DesignerMacros/src/diff-audit/diff-audit/class-on-apply/class-on-apply.ts
 */
async function execute(element) {
    const diffAuditStereoType = '4c7ff86d-641f-431b-a20f-94b3ccbef265';
    let primaryKeys = element.getChildren("Attribute").filter(x =&gt; x.hasStereotype("Primary Key"));
    let keyLen = Object.keys(primaryKeys).length;
    if (keyLen == 0) {
        await dialogService.error("No Primary Key found for Entity, please set a Primary Key before applying Diff Auditing.");
        element.removeStereotype(diffAuditStereoType);
    }
    else if (keyLen &gt;= 2) {
        await dialogService.error("This entity has a composite primary key, Diff Auditing cannot be applied to composite primary keys.");
        element.removeStereotype(diffAuditStereoType);
    }
}
await execute(element);</onAppliedScript>
  <validateFunction>let primaryKeys = element.getChildren("Attribute").filter(x =&gt; x.hasStereotype("Primary Key"));
let keyLen = Object.keys(primaryKeys).length;

if (keyLen == 0) {
    return "No Primary Key found for Entity, please set a Primary Key before applying Diff Auditing.";
}
else if (keyLen &gt;= 2) {
    return "This entity has a composite primary key, Diff Auditing cannot be applied to composite primary keys.";
}</validateFunction>
  <properties />
</stereotypeDefinition>